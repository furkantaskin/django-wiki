"use strict";(self.webpackChunkdjango_wiki=self.webpackChunkdjango_wiki||[]).push([[2130],{3905:(e,t,i)=>{i.d(t,{Zo:()=>d,kt:()=>k});var n=i(7294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var o=n.createContext({}),u=function(e){var t=n.useContext(o),i=t;return e&&(i="function"==typeof e?e(t):l(l({},t),e)),i},d=function(e){var t=u(e.components);return n.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=u(i),k=a,y=m["".concat(o,".").concat(k)]||m[k]||p[k]||r;return i?n.createElement(y,l(l({ref:t},d),{},{components:i})):n.createElement(y,l({ref:t},d))}));function k(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=i.length,l=new Array(r);l[0]=m;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var u=2;u<r;u++)l[u]=i[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,i)}m.displayName="MDXCreateElement"},7831:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>u});var n=i(7462),a=(i(7294),i(3905));const r={sidebar_position:2,custom_edit_url:null,description:"Django'da view yap\u0131s\u0131"},l="Django ile View Yap\u0131s\u0131",s={unversionedId:"django/orm/tutorial3",id:"django/orm/tutorial3",title:"Django ile View Yap\u0131s\u0131",description:"Django'da view yap\u0131s\u0131",source:"@site/docs/django/orm/3-tutorial3.mdx",sourceDirName:"django/orm",slug:"/django/orm/tutorial3",permalink:"/django-wiki/docs/django/orm/tutorial3",draft:!1,editUrl:null,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,custom_edit_url:null,description:"Django'da view yap\u0131s\u0131"},sidebar:"tutorialSidebar",previous:{title:"Modellere giri\u015f",permalink:"/django-wiki/docs/django/orm/tutorial2"}},o={},u=[{value:"View olu\u015fturma",id:"view-olu\u015fturma",level:2},{value:"Urls i\xe7inde Views&#39;a Y\xf6nlendirme",id:"urls-i\xe7inde-viewsa-y\xf6nlendirme",level:2},{value:"Template olu\u015fturma",id:"template-olu\u015fturma",level:2},{value:"404 Hatalar\u0131",id:"404-hatalar\u0131",level:2},{value:"Template \u0130\xe7inde \u0130ki Farkl\u0131 S\u0131n\u0131f Kullanma",id:"template-i\u0307\xe7inde-i\u0307ki-farkl\u0131-s\u0131n\u0131f-kullanma",level:2}],d={toc:u};function p(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"django-ile-view-yap\u0131s\u0131"},"Django ile View Yap\u0131s\u0131"),(0,a.kt)("p",null,"View, belirli bir g\xf6revi \xfcstlenen ve template mant\u0131\u011f\u0131 ile ilerleyen bir Django yap\u0131s\u0131d\u0131r. Sadece Django i\xe7in de\u011fil ayr\u0131ca bir MVC yap\u0131s\u0131d\u0131r. \xd6rnek bir blog uygulamas\u0131nda ana sayfa, ar\u015fivler (y\u0131ll\u0131k veya ayl\u0131k), blog detay sayfas\u0131n\u0131n yan\u0131 s\u0131ra yorumlar gibi sayfalar bulunur. Bunlar\u0131n i\xe7erik k\u0131sm\u0131n\u0131 view \xfczerinden kontrol ederiz. \xd6rne\u011fimizdeki anket uygulamas\u0131nda ise sorular, sorular\u0131n cevaplama sayfas\u0131, sorular\u0131n sonu\xe7lar sayfas\u0131 ve cevaplama i\u015flemi olmak \xfczere d\xf6rt farkl\u0131 durum vard\u0131r. \u015eimdi bunun \xf6n k\u0131s\u0131mdaki g\xf6sterimi ile ilgilenece\u011fiz."),(0,a.kt)("h2",{id:"view-olu\u015fturma"},"View olu\u015fturma"),(0,a.kt)("p",null,"Polls i\xe7indeki ",(0,a.kt)("inlineCode",{parentName:"p"},"views.py")," dosyas\u0131na gidip fonksiyonlar\u0131m\u0131z\u0131 ekleyerek ba\u015fl\u0131yoruz. Hat\u0131rlarsak \xf6nceki k\u0131s\u0131mda 4 farkl\u0131 olaydan bahsetmi\u015ftik. Buradaki oylama, sonu\xe7lar ve sorular durumlar\u0131 i\xe7in birer fonksiyonla \xe7al\u0131\u015faca\u011f\u0131z. \xd6nceki kodumuza dokunmadan a\u015fa\u011f\u0131daki fonksiyonlar\u0131 ekleyebiliriz."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="apps/polls/views.py"',title:'"apps/polls/views.py"'},'def detail(request, quest_id):\n    return HttpResponse("You\'re looking at question %s." % quest_id)\n\ndef results(request, quest_id):\n    response = "You\'re looking at the results of question %s."\n    return HttpResponse(response % quest_id)\n\ndef vote(request, quest_id):\n    return HttpResponse("You\'re voting on question %s." % quest_id)\n')),(0,a.kt)("h2",{id:"urls-i\xe7inde-viewsa-y\xf6nlendirme"},"Urls i\xe7inde Views'a Y\xf6nlendirme"),(0,a.kt)("p",null,"S\u0131rada bu fonksiyonlar\u0131 urls i\xe7ine kaydetmesi var. Burada birka\xe7 k\u0131sm\u0131 anlamayabilirsiniz."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="apps/polls/urls.py"',title:'"apps/polls/urls.py"'},"    path('<int:question_id>/', views.detail, name=\"detail\"),\n    path('<int:question_id>/result', views.result, name=\"result\"),\n    path('<int:question_id>/vote', views.vote, name=\"vote\")\n")),(0,a.kt)("p",null,'Burada ne yapt\u0131k? Urls i\xe7indeki path i\xe7inde url i\xe7inde sistem bir par\xe7alama yapar. \xd6ncelikle ana domainimiz ("127.0.0.1:8000"), sonras\u0131nda uygulama dizinimiz ("polls") ve sonras\u0131nda ise -buradaki mant\u0131k i\xe7in- sorumuzun linki bulunur. Django burada son k\u0131s\u0131mdaki veriyi okuyacakt\u0131r. \xd6rne\u011fin linkimiz 127.0.0.1:8000/polls/1 \u015feklinde gelirse Django, 1\'i buradaki ',(0,a.kt)("inlineCode",{parentName:"p"},"<int:question_id>")," i\xe7inde de\u011ferlendirecektir. Bu k\u0131s\u0131mla alakal\u0131 detayl\u0131 bilgiyi ",(0,a.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/4.1/topics/http/urls/"},"Django'nun sitesinden")," alabilirsiniz."),(0,a.kt)("admonition",{title:"D\u0130KKAT",type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"Buradaki ",(0,a.kt)("inlineCode",{parentName:"p"},"question_id")," dedi\u011fimiz parametre ile ",(0,a.kt)("inlineCode",{parentName:"p"},"views.py")," i\xe7indeki arg\xfcman ayn\u0131 olmal\u0131d\u0131r.")),(0,a.kt)("p",null,"Art\u0131k Django buradaki gelen URL parametrelerine g\xf6re en uygun fonksiyonu \xe7a\u011f\u0131racakt\u0131r. Views \xf6z\xfcnde iki olaydan sorumludur. Kullan\u0131c\u0131dan gelen iste\u011fe g\xf6re \xf6zel bir cevap \xfcretmek veya 404 d\xf6nd\xfcrmek. Geri kalan tasar\u0131msal i\u015flemler geli\u015ftiricinin hayal g\xfcc\xfcne kalm\u0131\u015f bir olayd\u0131r."),(0,a.kt)("p",null,"\u015eimdi index i\xe7inde sorular\u0131m\u0131z\u0131 listeletelim. B\xf6ylecek kullan\u0131c\u0131 polls i\xe7ine girince direkt olarak sorular\u0131 g\xf6rebilirir."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="apps/polls/views.py" showLineNumbers',title:'"apps/polls/views.py"',showLineNumbers:!0},'# Burada sadece highlight edilen k\u0131sm\u0131 de\u011fi\u015ftirdik. Di\u011ferleri yine ayn\u0131 \n\nfrom django.http import HttpResponse\n# highlight-start\nfrom .models import Question\n\n\ndef index(request):\n    latest_question_list = Question.objects.order_by(\'-pub_date\'[:5])\n    output = ", ".join([q.question_text for q in latest_question_list])\n    return HttpResponse(output)\n# highlight-end\n\ndef detail(request, quest_id):\n    return HttpResponse("You\'re in detail page for %s question" % quest_id)\n\n\ndef result(request, quest_id):\n    return HttpResponse("You\'re looking at the results of %s question" % quest_id)\n\n\ndef vote(request, quest_id):\n    return HttpResponse("You\'re voting for %s question" % quest_id)\n\n')),(0,a.kt)("admonition",{title:"B\u0130LG\u0130",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Buradaki ",(0,a.kt)("inlineCode",{parentName:"p"},"objects")," metodu i\xe7in ",(0,a.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/4.1/ref/models/querysets/#queryset-api"},"Django'nun sitesindeki QuerySet API sayfas\u0131n\u0131")," inceleyebilirsiniz. ",(0,a.kt)("inlineCode",{parentName:"p"},"pub_date")," ba\u015f\u0131ndaki eksi i\u015fareti descending (azalan) s\u0131ra ile s\u0131ralama yapaca\u011f\u0131n\u0131 g\xf6stermektedir. Geri kalan k\u0131s\u0131m klasik Python liste mant\u0131\u011f\u0131nda \xe7al\u0131\u015fmaktad\u0131r. ")),(0,a.kt)("h2",{id:"template-olu\u015fturma"},"Template olu\u015fturma"),(0,a.kt)("p",null,"Buradaki t\xfcm kodlar\u0131m\u0131z\u0131 views i\xe7inde yapt\u0131k ama bir sorun var. Sitemizin HTML/CSS ile haz\u0131rlanan bir \xf6n y\xfcz\xfc varken bu dinamik i\xe7eri\u011fi i\xe7eriye nas\u0131l ekleyece\u011fiz? \u0130\u015fte bu k\u0131s\u0131mda template sistemini kullanaca\u011f\u0131z. \u015eimdi Polls uygulamas\u0131 i\xe7ine template klas\xf6r\xfc a\xe7\u0131p i\xe7ine bir index.html dosyas\u0131 ekliyoruz."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="apps/polls/templates/index.html"',title:'"apps/polls/templates/index.html"'},'\n{% if latest_question_list %}\n    <ul>\n    {% for question in latest_question_list %}\n        <li><a href="/polls/{{ question.id }}/">{{ question.question_text }}</a></li>\n    {% endfor %}\n    </ul>\n{% else %}\n    <p>No polls are available.</p>\n{% endif %}\n\n')),(0,a.kt)("p",null,"Burada latest_question_list varsa e\u011fer ul listelemesi yap\u0131lacakt\u0131r. E\u011fer liste bo\u015fsa herhangi bir soru olmad\u0131\u011f\u0131n\u0131 s\xf6yleyece\u011fiz. Peki buradaki latest_question_list terimini Django nas\u0131l bilecek? Bunu views.py i\xe7inde yapaca\u011f\u0131z. index fonksiyonumuza ufak bir ekleme gerekiyor"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="apps/polls/views.py"',title:'"apps/polls/views.py"'},"from django.http import HttpResponse\nfrom .models import Question\n# highlight-start\nfrom django.shortcuts import render\n\n\ndef index(request):\n    latest_question_list = Question.objects.order_by('-pub_date')\n    context = {'latest_question_list': latest_question_list}\n    return render(request, 'index.html', context)\n# highlight-end\n\ndef detail(request, quest_id):\n    return HttpResponse(\"You're in detail page for %s question\" % quest_id)\n\n\ndef result(request, quest_id):\n    return HttpResponse(\"You're looking at the results of %s question\" % quest_id)\n\n\ndef vote(request, quest_id):\n    return HttpResponse(\"You're voting for %s question\" % quest_id)\n")),(0,a.kt)("p",null,"Art\u0131k template i\xe7indeki latest_question_list teriminin Django hangi listeye ya da yap\u0131ya ait oldu\u011funu bilecektir. S\u0131rada bunu ekrana basmas\u0131 var. Burada dilersek context \u015feklinde bir de\u011fi\u015fken tan\u0131mlamadan direkt olarak ",(0,a.kt)("inlineCode",{parentName:"p"},"return render(request, 'index.html', {latest_question_list}: latest_question_list")," \u015feklinde de yapabiliriz. Buras\u0131 tamamen size kalm\u0131\u015f bir olay."),(0,a.kt)("h2",{id:"404-hatalar\u0131"},"404 Hatalar\u0131"),(0,a.kt)("p",null,"Peki elimizde bir soru yoksa o soruya ait sayfaya gidince ne yapaca\u011f\u0131z? \u0130\u015fte bunun i\xe7in bir try catch metodu gerekecektir. Sorular\u0131n detay sayfas\u0131 i\xe7in bir d\xfczenleme yapaca\u011f\u0131z. \xd6ncelikle templates klas\xf6r\xfcne (index.html dosyas\u0131n\u0131n oldu\u011fu dizine) detail.html dosyas\u0131 olu\u015fturun ve i\xe7ine sadece ",(0,a.kt)("inlineCode",{parentName:"p"},"{{question}}")," ifadesini ekleyin. Sonras\u0131nda views i\xe7indeki detail fonksiyonunda ise \u015f\xf6yle bir d\xfczenleme yap\u0131n."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="apps/polls/views.py" showLineNumbers',title:'"apps/polls/views.py"',showLineNumbers:!0},"def detail(request, quest_id):\n    try:\n        question = Question.objects.get(pk=quest_id)\n    except Question.DoesNotExist:\n        raise Http404(\"There is no question, 404 Error\")\n    return render(request, 'detail.html', {'question': question})\n")),(0,a.kt)("admonition",{title:"Hat\u0131rlatma",type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"Burada be\u015finci sat\u0131rdaki ",(0,a.kt)("inlineCode",{parentName:"p"},"Http404")," k\u0131sm\u0131 hata verecektir. Bunun i\xe7in HttpResponse metodunu ekledi\u011fimiz import sat\u0131r\u0131n\u0131 ",(0,a.kt)("inlineCode",{parentName:"p"},"from django.http import HttpResponse, Http404")," olarak g\xfcncelleyin.")),(0,a.kt)("p",null,"Burada try except ile kod kalabal\u0131\u011f\u0131 olu\u015fuyor olabilir. Bunu daha kolay bir \u015fekilde de halledebiliriz. Dilerseniz t\xfcm fonksiyonu \u015fu \u015fekilde de yapabiliriz:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"def detail(request, quest_id):\n    question = get_object_or_404(Question, pk=quest_id)\n    return render(request, 'detail.html', {'question': question})\n")),(0,a.kt)("admonition",{title:"Hat\u0131rlatma",type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"Ayn\u0131 \u015fekilde buradaki ",(0,a.kt)("inlineCode",{parentName:"p"},"get_object_or_404")," k\u0131sm\u0131n\u0131 \xe7al\u0131\u015ft\u0131rabilmek i\xe7in render metodunu import etti\u011fimiz sat\u0131r\u0131 ",(0,a.kt)("inlineCode",{parentName:"p"},"from django.shortcuts import render, get_object_or_404")," olarak g\xfcncelleyin.")),(0,a.kt)("h2",{id:"template-i\u0307\xe7inde-i\u0307ki-farkl\u0131-s\u0131n\u0131f-kullanma"},"Template \u0130\xe7inde \u0130ki Farkl\u0131 S\u0131n\u0131f Kullanma"),(0,a.kt)("p",null,"Normalde bizim Question ve Choice olarak iki s\u0131n\u0131f\u0131m\u0131z vard\u0131. Bunlar\u0131 \xe7ok g\xfczel bir \u015fekilde kulland\u0131k ama bir sorun var. Sorunun sayfas\u0131nda o soruya ait se\xe7imleri g\xf6stermemiz gerekiyor. Bunu nas\u0131l yapaca\u011f\u0131z? \u0130\u015fte bu k\u0131s\u0131m da \xe7ok basit. \xd6ncelikle detail.html dosyas\u0131n\u0131 \u015fu \u015fekilde d\xfczenliyoruz."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="apps/polls/templates/detail.html"',title:'"apps/polls/templates/detail.html"'},"<h1>{{ question.question_text }}</h1>\n<ul>\n{% for choice in question.choice_set.all %}\n    <li>{{ choice.choice_text }}</li>\n{% endfor %}\n</ul>\n\n")))}p.isMDXComponent=!0}}]);